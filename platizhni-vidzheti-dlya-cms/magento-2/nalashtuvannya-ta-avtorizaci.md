# Налаштування та авторизаці

{% stepper %}
{% step %}
### Перехід у налаштуванню модулю

Для того, щоб налаштувати платіжний модуль "Alliance Payment"

Для цього потрібно :&#x20;

* Перейти в панель адмістрування Magento 2
* Перейти за шляхом \
  `Stores → Configuration → Sales → Payment Methods → Alliance Payment`

<figure><img src="../../.gitbook/assets/image (5) (1).png" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
### Початкові налаштування&#x20;

Вікно з відображенням усіх налаштуваннь&#x20;

<figure><img src="../../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Опис та значення полів:

| Enabled                         | <p>Yes<br>No</p>                                                         | Включення та відключення модуля.                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------------- | ------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Title                           | текстове поле                                                            | Назва платіжного метода яка буде відображатись на сторінці оплати (checkout payment step)                                                                                                                                                                                                                                                                                                                     |
|  Payment Type                   | <p>STATUS_TIMER_PAGE<br>STATUS_REDIRECT_MERCHANT_PAGE<br>STATUS_PAGE</p> | <ul><li><code>STATUS_TIMER_PAGE</code> - сторінка за замовчуванням, якщо мерчант не обрав бажаний тип, таймер редірект автоматично 1 хвилина відображення статус сторінки з автоматичним редіректом юзера на сайт мерчанта (редірект урл)</li><li><code>STATUS_REDIRECT_MERCHANT_PAGE</code> - одразу редірект на урл мерчанта</li><li><code>STATUS_PAGE</code> - редірект, на нашу статус сторінку</li></ul> |
| API URL                         | текстове поле                                                            | <p>URL API Alliance банка який надається банком.<br><a href="https://api-ecom-prod.bankalliance.ua/">https://api-ecom-prod.bankalliance.ua/</a></p>                                                                                                                                                                                                                                                           |
| Service Code                    | текстове поле                                                            | Сервісний код який надається Alliance банком.                                                                                                                                                                                                                                                                                                                                                                 |
| Marchant Id                     |                                                                          | ID мерчанта який надається Alliance банком.                                                                                                                                                                                                                                                                                                                                                                   |
| Authorization key               | текстове поле                                                            | <p>Генерується на стороні мерчанта по інструкції<br><a href="https://docs.merchant.alb.ua/autentifikaciya#proces-generaciyi-komunikaciinikh-jwk-klyuchiv-kliyenta">Аутентифікація | AlliancePay</a></p>                                                                                                                                                                                                       |
| Device Id                       | текстове поле(не активне)                                                | Заповнюється автоматично після авторизації                                                                                                                                                                                                                                                                                                                                                                    |
| Refresh Token                   | текстове поле(не активне)                                                | Заповнюється автоматично після авторизації                                                                                                                                                                                                                                                                                                                                                                    |
| Successful Payment Order Status | Дропдаун з можливістю вибору відображення успішного статусу ордера       | Статус в який ордер переходить автоматично після **оплати**                                                                                                                                                                                                                                                                                                                                                   |
| Failed Payment Order Status     | Дропдаун з можливістю вибору відображення неуспішного статусу ордера     | Статус в який ордер переходить автоматично після **помилки оплати**                                                                                                                                                                                                                                                                                                                                           |
| Successful Refund Order Status  | Дропдаун з можливістю вибору відображення успішного статусу повернення   | Статус в який ордер переходить автоматично після **повернення коштів**                                                                                                                                                                                                                                                                                                                                        |
| Failed Refund Order Status      | Дропдаун з можливістю вибору відображення неуспішного статусу повернення | Статус в який ордер переходить автоматично після після **помилки повернення коштів**                                                                                                                                                                                                                                                                                                                          |
| Enable Payment Logs             | <p>Yes<br>No</p>                                                         | <p>Включення та відключення додаткового логування помилок та даних в<br>&#x3C;MAGENTO_ROOT>/var/log/alliance_payment.log</p>                                                                                                                                                                                                                                                                                  |
{% endstep %}

{% step %}
### Авторизація

Після того, як усі поля були заповненні, потрібно зберегти налаштування, та виконати авторизацію для того, щоб з'явились поля `Device Id`, `Refresh Token`&#x20;

<figure><img src="../../.gitbook/assets/image (2) (1) (1).png" alt=""><figcaption></figcaption></figure>
{% endstep %}
{% endstepper %}

